@app.route('/search')
def search_snippets():
    # get query from user
    query = request.args.get('q')
    if not query:
        return render_template('search_documents.html')

    # query the index
    logging.info(f'Querying index with "{query}"...')
    response = index.query(query)

    # extract relevant snippets from the documents
    snippets = []
    for r in response:
        snippets.append(r.document.content[r.start:r.end])
    
    # format snippets for display
    formatted_snippets = '<br>'.join(snippets)

    # render the search_results.html template with the snippets
    return render_template('search_documents.html', query=query, snippets=formatted_snippets)
